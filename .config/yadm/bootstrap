#!/bin/bash

set -euo pipefail
IFS=$'\n\t'

trap 'ret=$?; test $ret -ne 0 && printf "failed\n\n" >&2; exit $ret' EXIT

for script in $(find $HOME/.dev-machine/setups -perm "+111" -type f | sort); do
  echo "ğŸƒâ€â™€ï¸ Running setup script for $script"

  if bash "$script"; then 
    echo "ğŸ‘ Successfully ran $script"
  else
    echo "âš ï¸ Error occurred when attempting to run $script"
  fi
done

echo "âœ… Done! Please open a new terminal window for changes to take effect."